name: "CLA Signature Bot"
on:
  issue_comment:
    types: [created]
  pull_request:
    types: [opened,closed,synchronize]

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js
        uses: actions/setup-node@v1
        with:
          node-version: 12.x
      - name: Npm install
        run: npm ci
      - name: "Run CLA Bot"
        uses: ./
        env: 
          GITHUB_TOKEN: ${{ github.token }}
        with:
          branch: master
          path-to-signatures: "signatures/cla.json"
          whitelist: "cliffchapmanrbx"
          use-remote-repo: true
          remote-repo-name: "roblox/cla-bot-store"
          remote-repo-pat: ${{ secrets.CLA_REMOTE_REPO_PAT }}
          url-to-cladocument: "https://roblox.github.io/cla-bot-store/"

  call-clabot-workflow:
    uses: Roblox/cla-signature-bot/.github/workflows/clabot-workflow.yml@d05a76b193129a9d35ebc82ff7eb78aecc253452
    with:
      whitelist: "cliffchapmanrbx"
      use-remote-repo: true
      remote-repo-name: "roblox/cla-bot-store"
    secrets: inherit
